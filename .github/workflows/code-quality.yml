name: Code Quality

on: 
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
    
jobs:

  build:

    strategy:
      matrix:
        configuration: [Debug, Release]

    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v3

# Run NuGet restore for each project/solution to analyze
    - name: Run NuGet restore
      run: dotnet restore Project-Library\Project-Library.csproj

# Run code analysis for all projects/solutions, such that code analysis violations break the build.
    - name: Run Code Analysis
      uses: dotnet/code-analysis@v1
      id: code-analysis
      with:
        solution: Project-Library.sln
        build-breaking: true
